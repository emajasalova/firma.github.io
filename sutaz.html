<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>S칰콘a쬹치 str치nka</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f9;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin: 20px 0;
    }
    .cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .card {
      background: white;
      border: 2px solid #ccc;
      padding: 20px;
      border-radius: 8px;
      width: 200px;
      height: 150px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    .card:hover {
      border-color: #00aaff;
    }
    .form-container {
      margin-top: 30px;
    }
    input[type="text"] {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      width: 200px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      color: white;
      background-color: #00aaff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-left: 10px;
    }
    button:hover {
      background-color: #007acc;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>S칰콘a쬹치 str치nka</h1>
  <div class="cards">
    <div class="card">游끥 Vyhraj a do 200.000 K캜</div>
    <div class="card">游끥 Vyhraj a do 400.000 K캜</div>
    <div class="card">游끥 Vyhraj a do 600.000 K캜</div>
    <div class="card">游뚱 Vyhraj Auto Evo IX s polepom</div>
    <div class="card">游눯 Vyhraj a do 700.000 K캜</div>
  </div>

  <div class="form-container">
    <h2>Zadaj svoj k칩d</h2>
    <input type="text" id="code" placeholder="Zadajte v치코 k칩d">
    <button id="submit">Odosla콘</button>
  </div>

  <div class="result" id="result"></div>

<script>
  const apiUrl = "https://674600bf512ddbd807fa7e9e.mockapi.io/etsst";

  document.getElementById("submit").addEventListener("click", async () => {
    const code = document.getElementById("code").value.trim();
    const result = document.getElementById("result");

    if (!code) {
      result.textContent = "Zadajte k칩d!";
      return;
    }

    try {
      // Overenie, 캜i k칩d existuje v MockAPI
      const response = await fetch(`${apiUrl}?code=${code}`);
      const data = await response.json();

      // Skontrolujeme, 캜i je k칩d platn칳 a e코te nebol pou쬴t칳
      if (data.length === 0 || data[0].used) {
        result.textContent = "K칩d neexistuje alebo u bol pou쬴t칳!";
        return;
      }

      // Generovanie n치hodnej v칳hry
      const prizes = [
        "5 000 K캜", "10 000 K캜", "13 000 K캜", "15 000 K캜", "18 000 K캜", 
        "19 500 K캜", "22 000 K캜", "30 000 K캜", "26 000 K캜", "35 000 K캜",
        "37 000 K캜", "40 000 K캜", "42 000 K캜", "39 000 K캜", "50 000 K캜",
 
      ];

      // Pravdepodobnosti pre jednotliv칠 v칳hry
const probabilities = [
  0.1, 0.1, 0.1, 0.1, 0.1, 
  0.1, 0.1, 0.1, 0.1, 0.1, 
  0.1, 0.1, 0.1, 0.1, 0.1

];


      const random = Math.random();
      let cumulativeProbability = 0;
      let prize = "콯iadna v칳hra";

      for (let i = 0; i < prizes.length; i++) {
        cumulativeProbability += probabilities[i];
        if (random <= cumulativeProbability) {
          prize = prizes[i];
          break;
        }
      }

      // Z칤skanie ID z치znamu v MockAPI a pridanie v칳hry
      const id = data[0].id; // ID z치znamu v MockAPI

      // Aktualiz치cia z치znamu o k칩de, ozna캜칤me ho ako pou쬴t칳
      await fetch(`${apiUrl}/${id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          ...data[0], // zachov치me existuj칰ce 칰daje
          prize: prize, // prid치me v칳hru
          used: true // ozna캜칤me k칩d ako pou쬴t칳
        })
      });

      result.textContent = `Gratulujeme! Vyhrali ste: ${prize}`;
    } catch (error) {
      result.textContent = "Do코lo k chybe pri spracovan칤 po쬴adavky!";
    }
  });
</script>

</body>
</html>
